{% extends 'base.html' %}

{% block content %}
<h1>Available Plans</h1>
<ul>
    {% for plan in plans %}
    <li>{{ plan.name }} - {{ plan.price }} - <a href="{% url 'purchase_plan' plan.id %}">Buy</a></li>
    {% endfor %}
</ul>

<!-- Telegram Login Widget -->
<script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="your_bot_username" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
<script type="text/javascript">
    function onTelegramAuth(user) {
        // Send user data to backend
        window.location.href = "/telegram_login/?id=" + user.id + "&first_name=" + user.first_name + "&username=" + user.username + "&photo_url=" + user.photo_url + "&auth_date=" + user.auth_date + "&hash=" + user.hash;
    }
</script>
{% endblock %}